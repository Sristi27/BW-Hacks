{"ast":null,"code":"var _jsxFileName = \"/Users/sristichowdhury/Desktop/bwHacks/client/src/components/camera-feed.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport './cameraStyles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar base64Img = require('base64-img');\n\nexport class CameraFeed extends Component {\n  constructor(...args) {\n    super(...args);\n    this.val = '';\n\n    this.takePhoto = () => {\n      const {\n        sendFile\n      } = this.props;\n      const context = this.canvas.getContext('2d');\n      context.drawImage(this.videoPlayer, 0, 0, 280, 260);\n      this.canvas.toBlob(sendFile); // oCtx.drawImage(oColorImg, 0, 0);\n\n      var oImgData = context.getImageData(0, 0, 280, 260);\n      context.putImageData(oImgData, 0, 0);\n      var oGrayImg = new Image();\n      oGrayImg.src = this.canvas.toDataURL(); //     let base64ToString = Buffer.from(oGrayImg.sr\n      //         , \"base64\").toString()\n      //    console.log(base64ToString)\n      //     console.log(oGrayImg)\n\n      var filepath = base64Img.imgSync(oGrayImg.src, '', '2');\n      fetch('https://speakupgenderapi.herokuapp.com/predict_api', {\n        mode: 'no-cors',\n        method: 'post',\n        body: JSON.stringify({\n          file: oGrayImg.src\n        })\n      }) // .then(res=>res.json()).\n      .then(res => console.log(res)).catch(err => console.log(err));\n    };\n\n    this.downloadCanvas = () => {\n      let link = document.createElement(\"a\");\n      link.download = \"image.png\";\n      this.canvas.toBlob(function (blob) {\n        link.href = URL.createObjectURL(blob); // link.click();\n      });\n    };\n  }\n\n  processDevices(devices) {\n    devices.forEach(device => {\n      // console.log(device.label);\n      this.setDevice(device);\n    });\n  }\n  /**\n   * Sets the active device and starts playing the feed\n   * @memberof CameraFeed\n   * @instance\n   */\n  // async setDevice(device) {\n  //     const { deviceId } = device;\n  //     const stream = await navigator.mediaDevices.getUserMedia(\n  //         { audio: false, video: { deviceId } });\n  //     this.videoPlayer.srcObject = stream;\n  //     this.videoPlayer.play();\n  // }\n\n  /**\n   * On mount, grab the users connected devices and process them\n   * @memberof CameraFeed\n   * @instance\n   * @override\n   */\n  // async componentDidMount() {\n  //     const cameras = await navigator.mediaDevices.enumerateDevices();\n  //     this.processDevices(cameras);\n  // }\n\n  /**\n   * Handles taking a still image from the video feed on the camera\n   * @memberof CameraFeed\n   * @instance\n   */\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Camera, {\n      ref: cam => {\n        this.camera = cam;\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: takePicture,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), \" \\xA0 Take photo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/sristichowdhury/Desktop/bwHacks/client/src/components/camera-feed.jsx"],"names":["React","Component","Link","base64Img","require","CameraFeed","val","takePhoto","sendFile","props","context","canvas","getContext","drawImage","videoPlayer","toBlob","oImgData","getImageData","putImageData","oGrayImg","Image","src","toDataURL","filepath","imgSync","fetch","mode","method","body","JSON","stringify","file","then","res","console","log","catch","err","downloadCanvas","link","document","createElement","download","blob","href","URL","createObjectURL","processDevices","devices","forEach","device","setDevice","render","cam","camera","takePicture"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport './cameraStyles.css'\n\nvar base64Img = require('base64-img');\n\nexport class CameraFeed extends Component {\n    /**\n     * Processes available devices and identifies one by the label\n     * @memberof CameraFeed\n     * @instance\n     */\n\n\n    val=''\n\n    processDevices(devices) {\n        devices.forEach(device => {\n            // console.log(device.label);\n            this.setDevice(device);\n        });\n    }\n\n    /**\n     * Sets the active device and starts playing the feed\n     * @memberof CameraFeed\n     * @instance\n     */\n    // async setDevice(device) {\n    //     const { deviceId } = device;\n    //     const stream = await navigator.mediaDevices.getUserMedia(\n    //         { audio: false, video: { deviceId } });\n    //     this.videoPlayer.srcObject = stream;\n    //     this.videoPlayer.play();\n    // }\n\n    /**\n     * On mount, grab the users connected devices and process them\n     * @memberof CameraFeed\n     * @instance\n     * @override\n     */\n    // async componentDidMount() {\n    //     const cameras = await navigator.mediaDevices.enumerateDevices();\n    //     this.processDevices(cameras);\n    // }\n\n    /**\n     * Handles taking a still image from the video feed on the camera\n     * @memberof CameraFeed\n     * @instance\n     */\n\n    takePhoto = () => {\n        const { sendFile } = this.props;\n        const context = this.canvas.getContext('2d');\n        context.drawImage(this.videoPlayer, 0, 0, 280, 260);\n        this.canvas.toBlob(sendFile);\n        // oCtx.drawImage(oColorImg, 0, 0);\n        var oImgData = context.getImageData(0, 0, 280, 260);\n        context.putImageData(oImgData, 0, 0);\n        var oGrayImg = new Image();\n        oGrayImg.src = this.canvas.toDataURL();\n    //     let base64ToString = Buffer.from(oGrayImg.sr\n    //         , \"base64\").toString()\n    //    console.log(base64ToString)\n    //     console.log(oGrayImg)\n\n\n        var filepath = base64Img.imgSync(oGrayImg.src, '', '2');\n\n\n\n        fetch('https://speakupgenderapi.herokuapp.com/predict_api',\n        {\n            mode: 'no-cors',\n            method:'post',\n            body:JSON.stringify({file:oGrayImg.src})\n        })\n        // .then(res=>res.json()).\n        .then(res=>console.log(res)).\n        catch(err=>console.log(err))\n    }\n\n    downloadCanvas = ()=> {\n\n        let link = document.createElement(\"a\");\n        link.download = \"image.png\";\n        this.canvas.toBlob(function(blob) {\n        link.href = URL.createObjectURL(blob);\n        // link.click();\n        },);\n\n        }\n\n    \n    render() {\n        return (\n            <Camera\n            ref={(cam) => {\n                this.camera = cam;\n            }}\n            >\n            <button onClick={takePicture}>\n                <i className=\"fas fa-camera\"></i> &nbsp; Take photo\n            </button>\n            </Camera>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}